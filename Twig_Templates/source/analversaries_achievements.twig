{% extends "fullwidth.twig" %}

{% block content %}


    <script type = "text/javascript" language = "javascript">



//Generic function to retrieve data
function getListData(url_value,div_value, column_one_header, column_two_header, column_three_header, column_four_header){
 var formData = {};
 $.ajax({
     url : url_value,
     type: "POST",
     data : formData,
     dataType : 'json',
     success: function(data, textStatus, jqXHR){
       $(div_value).empty();

       $(div_value).append('<table class="table table-condensed">');
       $(div_value).append('<thead>');
       $(div_value).append('<tr><td><b>' +column_one_header+'</b></td><td>&nbsp;' +column_two_header+'</td><td>&nbsp;' +column_three_header+'</td><td>&nbsp;' +column_four_header+'</td></tr>');
       $(div_value).append('</thead>');




       $.each(data, function(key,row) {
         $(div_value).append('<tr>');
         $(div_value).append('<td><b>'+ row.HASHER_NAME + '</b></td>');
         $(div_value).append('<td>&nbsp;<a href="/{{kennel_abbreviation}}/hashes/'+row.FIRST_HASH_KEY+'">'+ row.FIRST_HASH_DATE + '</a></td>');
         $(div_value).append('<td>&nbsp;<a href="/{{kennel_abbreviation}}/hashes/'+row.ANALVERSARY_HASH_KY+'">'+ row.ANALVERSARY_DATE + '</a></td>');
         $(div_value).append('<td>&nbsp;'+ row.DAYS_TO_REACH_ANALVERSARY + '</td>');
         $(div_value).append('</tr>');
       });

       $(div_value).append('</table>');

     },
     error: function (jqXHR, textStatus, errorThrown){
          alert("failure");
          alert(jqXHR);
          alert(textStatus);
          alert(errorThrown);
     }
 });
}


   //Call these functions upon page load
   $(document).ready(function() {

     getListData("{{url_value}}","#main_list_data","Hasher","First Hash","Analversary Hash","Days Taken");
     //getListData("/SCH4/69/quickest/to/reach/bydays","#main_list_data","Hasher","First Hash","Analversary Hash","Days Taken");

      //getListData("/{{kennel_abbreviation}}/statistics/hasher/hashes/by/year","#hasherHashesByYear-list","Year","Count");
    });

   </script>

    <div class="container">
      <h1>{{pageTitle}}</h1>

      <div class="row">
        <div class="col-sm-12">
          <div data-role="content" id="main_list_data">
            This report takes a long time to run. Please be patient.
          </div>
        </div>
      </div>
    </div>

{% endblock %}
